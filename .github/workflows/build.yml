on: #ָ������ workflow ���¼�
  workflow_dispatch: #����������ʱ����

jobs: #���幤������
  build: #����������Ϊ build
    runs-on: ubuntu-22.04 #ʹ�� Ubuntu 22.04 ����ִ��
    container: #��������
      image: archlinux:latest #ʹ�� Arch Linux ����
    steps: #���幤�������еĲ���
      - name: Install dependencies
        run: |
          pacman -Syyu --noconfirm \
            base-devel \
            arm-none-eabi-gcc \
            arm-none-eabi-newlib \
            git \
            python-pip \
            python-crcmod \

      - name: Checkout #��ȡ����
        uses: actions/checkout@v3 #ʹ�� GitHub Actions �ṩ�� checkout ����

      - name: safe.directory #���� git �� safe.directory ����
        run: git config --global --add safe.directory /__w/uv-k5-firmware-custom/uv-k5-firmware-custom

      - name: Make #ִ�� make ����
        run: make full  #������Ŀ

      - name: size #���� firmware ��С
        run: arm-none-eabi-size firmware #ʹ�� arm-none-eabi-size �������̼���С

      - name: Upload Artifact #�ϴ��̼��ļ�
        uses: actions/upload-artifact@v3 #ʹ�� GitHub Actions �ṩ�� upload-artifact ����
        with:
          name: firmware #���� artifact ����Ϊ firmware
          path: LOSEHU*.bin #�ϴ��ļ�·��Ϊ LOSEHU*.bin


